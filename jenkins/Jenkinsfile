#!/usr/bin/env groovy|

pipeline {
    agent any
    environment {
	BUILD_MSG = 'Building.. ${env.BUILD_ID} on ${env.JENKINS_URL}'
    }

    stages {
        echo '${BUILD_MSG}'
        stage('Build') {
             node ('cell'){
	          steps {
	             checkout scm
	             def cellImage = docker.build("cell-Image", "-f ./app/Dockerfile .")
	          }
	     }
        }
        stage('Test') {
            steps {
                echo 'Testing.. ${env.BUILD_ID}'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying.... ${env.BUILD_ID}'
            }
        }
    }
}
